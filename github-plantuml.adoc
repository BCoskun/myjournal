= Using plantuml in AsciiDoc on GitHub
:author: David Buret
:source-highlighter: pygments
:pygments-style: github
:icons: font
:sectnums:
:toclevels: 4
:toc:
:imagesdir: images/
:toc-title: Sommaire
:gitplant: http://www.plantuml.com/plantuml/proxy?src=https://raw.githubusercontent.com/DBuret/myjournal/master/
ifdef::env-github[]
:tip-caption: :bulb:
:note-caption: :information_source:
:important-caption: :heavy_exclamation_mark:
:caution-caption: :fire:
:warning-caption: :warning:
endif::[]

== introduction

I'm currently moving to asciidoc and plantuml to write docs.
Github asciidoc parsing does not understand plantuml.

WARNING: AsciiDoc support on GitHub is far to be perfect. see

== solution

Use plantuml online server to parse the plantuml file on github, and use its full url in github asciidoc files
 
.PlantUML proxy syntax
http://www.plantuml.com/plantuml/proxy?src=https://raw.githubusercontent.com/DBuret/myjournal/master/test.puml

.AsciiDoc syntax
[source]
----
image::http://www.plantuml.com/plantuml/proxy?src=https://raw.githubusercontent.com/DBuret/myjournal/master/test.puml[test]
----

This syntax is too, let's use an asciidoc variable _gitplant_

.Easy way to display plantuml in asciidoc on github
[source]
----
:gitplant: http://www.plantuml.com/plantuml/proxy?src=https://raw.githubusercontent.com/DBuret/myjournal/master/

image::{gitplant}/test.puml[test]
----

== Result

image::{gitplant}/test.puml[PlantUML Image]

TIP: Purge an image from GitHub cache with: `curl -X PURG https://camo.githubusercontent.com/xxxxxxxxxxx`
